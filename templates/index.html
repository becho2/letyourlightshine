<!doctype html>
<html lang="ko">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta property="og:title" content="Jin's page" />
    <meta property="og:description" content="ì•ˆë…•í•˜ì„¸ìš”, ê¹€ì§„íšŒì…ë‹ˆë‹¤." />
    <meta property="og:image" content="{{ url_for('static', filename='ogimage.jpg') }}" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap" rel="stylesheet">

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

    <title>Jin's page</title>
    <style>
        * {
            font-family: "Nanum Gothic", sans-serif;
        }

        .wrap_all {
            width: 800px;
            height: 100%;
            margin: auto;
        }

        .carousel-inner {
            height: 600px;
        }

        img {
            width: 100%;
        }

        .goods_name {
            font-size: 50px;
        }

        .wrap_details {
            font-size: 25px;
            padding-top: 20px;
        }

        select {
            font-size: 15px;
        }

        .wrap_btn {
            text-align: center;
        }

        .blue {
            color: blue;
            font-size: 15px;
        }

        table.type07 {
            border-collapse: collapse;
            text-align: left;
            line-height: 1.5;
            border: 1px solid #ccc;
            margin: 20px 10px;
        }

        table.type07 thead {
            border-right: 1px solid #ccc;
            border-left: 1px solid #ccc;
            background: #e7708d;
        }

        table.type07 thead th {
            padding: 10px;
            font-weight: bold;
            vertical-align: top;
            color: #fff;
        }

        table.type07 tbody th {
            width: 150px;
            padding: 10px;
            font-weight: bold;
            vertical-align: top;
            border-bottom: 1px solid #ccc;
            background: #fcf1f4;
        }

        table.type07 td {
            width: 350px;
            padding: 10px;
            vertical-align: top;
            border-bottom: 1px solid #ccc;
        }
    </style>

    <script>
        $(document).ready(function () {
            $.ajax({
                type: "GET",
                url: "http://spartacodingclub.shop/sparta_api/rate",
                data: {},
                success: function (response) {
                    let rate = response['rate'];
                    $("#rate").text(rate);
                }
            })
            showOrders()
        });

        // function search() {
        //     alert("ë¯¸ì•ˆí•´ìš”, ì‚¬ì‹¤ ì•„ë¬´ ê¸°ëŠ¥ë„ ì—†ëŠ” ë²„íŠ¼ì´ì—ìš”ã… ã… ");
        // }


        function showOrders() {
            let temp_html = ''
            $.ajax({
                type: "GET",
                url: "/order",
                data: {},
                success: function (response) {
                    const data = response['orders']
                    for (let i = 0; i < data.length; i++) {
                        let data_name = data[i]['name']
                        let data_cnt = data[i]['cnt']
                        let data_addr = data[i]['addr']
                        let data_phone = data[i]['phone']

                        temp_html += `
                                <tr>
                                    <td>${data_name}</td>
                                    <td>${data_cnt}</td>
                                    <td>${data_addr}</td>
                                    <td>${data_phone}</td>
                                </tr>
                            `;

                    }
                    $("#orderTable").append(temp_html)
                }
            })
        }

        function saveOrder() {
            let name = $('#name').val()
            let cnt = $('#cnt').val()
            let addr = $('#address').val() + ' ' + $('#extraAddress').val()
            let code = $('#postcode').val()
            let phone = $('#phone1').val() + '-' + $('#phone2').val() + '-' + $('#phone3').val()
            if (name == "") {
                alert("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                return false;
            } else if (code == "") {
                alert("ìš°í¸ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                return false;
            } else if (addr == "") {
                alert("ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                return false;
            } else if (phone2 == "") {
                alert("í•¸ë“œí°ë²ˆí˜¸ë¥¼ ì „ë¶€ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                return false;
            } else if (phone3 == "") {
                alert("í•¸ë“œí°ë²ˆí˜¸ë¥¼ ì „ë¶€ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                return false;
            }
            $.ajax({
                type: "POST",
                url: "/order",
                data: {
                    "name": name,
                    "cnt": cnt,
                    "addr": addr,
                    "code": code,
                    "phone": phone
                },
                success: function (response) {
                    alert(response['msg']);
                    window.location.reload()
                }
            })
        }

    </script>
</head>

<body>
    <div class="wrap_all">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="#">Jin's Page</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
                aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav">
                    <li class="nav-item active">
                        <a class="nav-link" href="/jobs">ì±„ìš©ê³µê³  <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://velog.io/@danceintherain">ê°œë°œì¼ì§€</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://www.instagram.com/mom.s_kitchen__/">ë©”ë‰´(ì¸ìŠ¤íƒ€)</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">
                            í—¤í—·
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <a class="dropdown-item" href="#">ì•—..</a>
                            <a class="dropdown-item" href="#">ì•„ë¬´ê²ƒë„..</a>
                            <a class="dropdown-item" href="#">ì—„ì„œìš”..</a>
                        </div>
                    </li>
                </ul>
            </div>
            <!-- 
            <form class="form-inline">
                <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                <button onclick="search()" class="btn btn-outline-success my-2 my-sm-0" type="submit">ê²€ìƒ‰</button>
            </form> -->
        </nav>
        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
                <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="4"></li>
                <!-- <li data-target="#carouselExampleIndicators" data-slide-to="2"></li> -->
            </ol>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img class="d-block w-100" src="../static/yukjeon.jpg" alt="First slide">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="../static/tteok_1.jpg" alt="Second slide">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="../static/jeon_etc.jpg" alt="Third slide">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="../static/ddaeng_1.jpg" alt="Third slide">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="../static/yeongn_1.jpg" alt="Third slide">
                </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>


        <div class="wrap_details">
            <p><span class="goods_name">ë§˜ìŠ¤í‚¤ì¹œMom's Kitchen ë°˜ì°¬!</span></p>
            <p> ê°€ê²©: ë°˜ì°¬ë³„ ìƒì´<a href="https://www.instagram.com/mom.s_kitchen__/">(ì¸ìŠ¤íƒ€ ì°¸ì¡°)</a><br /><span class="blue">ì˜¤ëŠ˜
                    ë‹¬ëŸ¬-ì› í™˜ìœ¨: <span id="rate"></span></span></p>

            <pre>
                ê°ì¢… ë°˜ì°¬,ê¹€ì¹˜,ëª…ì ˆìŒì‹,ë„ì‹œë½ ê±±ì • ë!
                ì—„ë§ˆê°€ ë§Œë“œëŠ” ê±´ê°•í•˜ê³  ë§›ìˆëŠ” ë°˜ì°¬ğŸ½
                âœ¨AM9:00~PM20:00âœ¨
                í•˜ë‚¨ë‘ì‚°ìœ„ë¸Œ 1ì¸µ(í™ˆí”ŒëŸ¬ìŠ¤)
                ì—„ë§ˆì˜ë¶€ì—ŒğŸ‘©ğŸ»â€ğŸ³
                Mom's ğŸ½ kitchen
                â™¥ï¸ê°€ê²©í‘œì—†ëŠ”ë°˜ì°¬ 4íŒ©ì— ë§Œì›~!ğŸ’¶â™¥ï¸
                #í•˜ë‚¨#ë°˜ì°¬ê°€ê²Œ#ì£¼ë¬¸í™˜ì˜#ì˜ˆì•½ê°€ëŠ¥#ë‹¨ì²´ì£¼ë¬¸
            </pre>

            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1">ì£¼ë¬¸ì ì´ë¦„</span>
                </div>
                <input type="text" class="form-control" placeholder="ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" aria-label="name"
                    aria-describedby="basic-addon1" id="name">
            </div>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1">ìš°í¸ë²ˆí˜¸</span>
                </div>
                <input type="text" class="form-control" placeholder="ìš°ì¸¡ ë²„íŠ¼ì„ í´ë¦­í•´ ìš°í¸ë²ˆí˜¸ ê²€ìƒ‰í•˜ê¸°" aria-label="address"
                    aria-describedby="basic-addon1" id="postcode" readonly>
                <button onclick="postcode()" type="submit" class="btn btn-primary">ìš°í¸ë²ˆí˜¸ ì°¾ê¸°</button>
            </div>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1">ì£¼ì†Œ</span>
                </div>
                <input type="text" class="form-control" placeholder="ì£¼ì†Œ" aria-label="address"
                    aria-describedby="basic-addon1" id="address">
                <input type="text" class="form-control" placeholder="ìƒì„¸ì£¼ì†Œ" aria-label="address"
                    aria-describedby="basic-addon1" id="extraAddress">

            </div>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <label class="input-group-text">ì „í™”ë²ˆí˜¸</label>
                </div>
                <select class="custom-select" id="phone1">
                    <option selected>ì„ íƒ</option>
                    <option value="010">010</option>
                    <option value="011">011</option>
                    <option value="016">016</option>
                    <option value="017">017</option>
                    <option value="018">018</option>
                    <option value="019">019</option>
                </select>
                -
                <input type='tel' class="form-control" id="phone2" maxlength="4">
                -
                <input type='tel' class="form-control" id="phone3" maxlength="4">
            </div>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <label class="input-group-text">ìˆ˜ëŸ‰</label>
                </div>
                <select class="custom-select" id="cnt">
                    <option selected>ì„ íƒ</option>
                    <option value="1">4íŒ© 1ì„¸íŠ¸ (1ë§Œì›)</option>
                    <option value="2">4íŒ© 2ì„¸íŠ¸ (2ë§Œì›)</option>
                    <option value="3">4íŒ© 3ì„¸íŠ¸ (3ë§Œì›+ë°°ì†¡ë¹„ ë¬´ë£Œ)</option>
                </select>
            </div>
            <div class="wrap_btn">
                <button onclick="saveOrder()" type="submit" class="btn btn-primary">ì£¼ë¬¸í•˜ê¸°</button>
            </div>
        </div>
        <table class="type07">
            <thead>
                <tr>
                    <th>ì´ë¦„</th>
                    <th>ìˆ˜ëŸ‰</th>
                    <th>ì£¼ì†Œ</th>
                    <th>ì—°ë½ì²˜</th>
                </tr>
            </thead>
            <tbody id="orderTable">

            </tbody>
        </table>
    </div>
    <script>
        function postcode() {
            new daum.Postcode({
                oncomplete: function (data) {
                    var addr = ''; // ì£¼ì†Œ ë³€ìˆ˜
                    var extraAddr = ''; // ì°¸ê³ í•­ëª© ë³€ìˆ˜

                    //ì‚¬ìš©ìê°€ ì„ íƒí•œ ì£¼ì†Œ íƒ€ì…ì— ë”°ë¼ í•´ë‹¹ ì£¼ì†Œ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.
                    if (data.userSelectedType === 'R') { // ì‚¬ìš©ìê°€ ë„ë¡œëª… ì£¼ì†Œë¥¼ ì„ íƒí–ˆì„ ê²½ìš°
                        addr = data.roadAddress;
                    } else { // ì‚¬ìš©ìê°€ ì§€ë²ˆ ì£¼ì†Œë¥¼ ì„ íƒí–ˆì„ ê²½ìš°(J)
                        addr = data.jibunAddress;
                    }

                    // ì‚¬ìš©ìê°€ ì„ íƒí•œ ì£¼ì†Œê°€ ë„ë¡œëª… íƒ€ì…ì¼ë•Œ ì°¸ê³ í•­ëª©ì„ ì¡°í•©í•œë‹¤.
                    if (data.userSelectedType === 'R') {
                        // ë²•ì •ë™ëª…ì´ ìˆì„ ê²½ìš° ì¶”ê°€í•œë‹¤. (ë²•ì •ë¦¬ëŠ” ì œì™¸)
                        // ë²•ì •ë™ì˜ ê²½ìš° ë§ˆì§€ë§‰ ë¬¸ìê°€ "ë™/ë¡œ/ê°€"ë¡œ ëë‚œë‹¤.
                        if (data.bname !== '' && /[ë™|ë¡œ|ê°€]$/g.test(data.bname)) {
                            extraAddr += data.bname;
                        }
                        // ê±´ë¬¼ëª…ì´ ìˆê³ , ê³µë™ì£¼íƒì¼ ê²½ìš° ì¶”ê°€í•œë‹¤.
                        if (data.buildingName !== '' && data.apartment === 'Y') {
                            extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                        }
                        // í‘œì‹œí•  ì°¸ê³ í•­ëª©ì´ ìˆì„ ê²½ìš°, ê´„í˜¸ê¹Œì§€ ì¶”ê°€í•œ ìµœì¢… ë¬¸ìì—´ì„ ë§Œë“ ë‹¤.
                        if (extraAddr !== '') {
                            extraAddr = ' (' + extraAddr + ')';
                        }
                        // ì¡°í•©ëœ ì°¸ê³ í•­ëª©ì„ í•´ë‹¹ í•„ë“œì— ë„£ëŠ”ë‹¤.
                        document.getElementById("extraAddress").value = extraAddr;

                    } else {
                        document.getElementById("extraAddress").value = '';
                    }

                    // ìš°í¸ë²ˆí˜¸ì™€ ì£¼ì†Œ ì •ë³´ë¥¼ í•´ë‹¹ í•„ë“œì— ë„£ëŠ”ë‹¤.
                    document.getElementById('postcode').value = data.zonecode;
                    document.getElementById("address").value = addr;
                    // ì»¤ì„œë¥¼ ìƒì„¸ì£¼ì†Œ í•„ë“œë¡œ ì´ë™í•œë‹¤.
                    document.getElementById("extraAddress").focus();
                }
            }).open();
        }

    </script>
</body>

</html>